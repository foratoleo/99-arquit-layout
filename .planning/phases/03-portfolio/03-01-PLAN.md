---
phase: 03-portfolio
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/portfolio/page.tsx
  - src/components/portfolio/GalleryGrid.tsx
  - src/components/portfolio/GalleryItem.tsx
  - src/components/portfolio/FullscreenModal.tsx
  - src/lib/portfolio-data.ts
  - public/images/portfolio/*.jpg
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Gallery displays projects in 2-column modular grid on desktop"
    - "Mobile users see single column fullscreen images"
    - "All images have explicit dimensions to prevent CLS"
    - "Images use next/image with WebP/AVIF optimization"
  artifacts:
    - path: "src/components/portfolio/GalleryGrid.tsx"
      provides: "Grid layout with responsive columns (2 desktop, 1 mobile)"
      contains: "grid-cols-1 md:grid-cols-2"
    - path: "src/components/portfolio/GalleryItem.tsx"
      provides: "Individual gallery item with hover effects"
      exports: ["GalleryItem"]
    - path: "src/components/portfolio/FullscreenModal.tsx"
      provides: "Modal for fullscreen image viewing"
      exports: ["FullscreenModal"]
    - path: "src/lib/portfolio-data.ts"
      provides: "Project data with image dimensions"
      contains: "export const projects"
    - path: "src/app/portfolio/page.tsx"
      provides: "Portfolio page route"
      exports: ["default"]
  key_links:
    - from: "src/components/portfolio/GalleryItem.tsx"
      to: "next/image"
      via: "Image component import"
      pattern: "import.*Image.*from.*['\"]next/image['\"]"
    - from: "src/components/portfolio/GalleryGrid.tsx"
      to: "src/lib/portfolio-data.ts"
      via: "projects data import"
      pattern: "import.*projects.*from.*@/lib/portfolio-data"
---

<objective>
Create the portfolio gallery page with modular grid layout, responsive behavior, and optimized images using next/image.

Purpose: The portfolio gallery is the core visual showcase of the firm's work. A well-executed gallery builds credibility and demonstrates technical competence through both layout quality and image optimization.

Output: Working portfolio page with grid layout, hover effects, and fully optimized images that load without CLS violations.
</objective>

<execution_context>
@/Users/forato/.claude/get-shit-done/workflows/execute-plan.md
@/Users/forato/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-portfolio/03-CONTEXT.md

# Design tokens from Phase 1 (assumed available)
# - Colors: sand (#D4C4A8), greige (#9C9589), matte black (#1A1A1A)
# - Typography: Fine serif for headings, sans-serif for body
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create portfolio data structure with placeholder projects</name>
  <files>src/lib/portfolio-data.ts</files>
  <action>
Create src/lib/portfolio-data.ts with:

1. Define Project interface:
   - id: string
   - title: string
   - location: string
   - year: number
   - category: 'residential' | 'commercial'
   - images: ProjectImage[]

2. Define ProjectImage interface:
   - src: string (image path)
   - width: number (explicit width for CLS prevention)
   - height: number (explicit height for CLS prevention)
   - alt: string

3. Create 6-8 placeholder projects using Unsplash architecture images:
   - Use images.unsplash.com with architecture keywords
   - Set uniform aspect ratio (4:3) per context decision
   - Example dimensions: width=800, height=600 for all images
   - Categories: mix of residential and commercial

4. Export as: export const projects: Project[]

Note: These are placeholder images that will be replaced with actual project photography later (CNT-02 requirement).
  </action>
  <verify>TypeScript compiles without errors; projects array has 6-8 items with all required fields</verify>
  <done>Portfolio data structure exists with 6-8 placeholder projects, each with properly sized images</done>
</task>

<task type="auto">
  <name>Task 2: Create GalleryItem component with hover effects</name>
  <files>src/components/portfolio/GalleryItem.tsx</files>
  <action>
Create src/components/portfolio/GalleryItem.tsx as a Client Component:

1. Add 'use client' directive
2. Import Image from 'next/image'
3. Accept props: project (Project), onClick (function)
4. Implement:
   - Relative container for hover effects
   - Image with explicit width/height from project data
   - Subtle opacity change on hover (opacity-80 to opacity-100)
   - Subtle scale transform on hover (scale-105)
   - Smooth transition (transition-all duration-300)
   - Project info overlay: title, location, year (positioned absolute at bottom)
   - Overlay background: semi-transparent black for text readability
   - Text color: white for contrast on overlay
   - Cursor pointer to indicate clickability
5. Use next/image with:
   - sizes prop for responsive loading
   - placeholder="blur" for better UX
   - quality=85 for balance

Per context decision: "Subtle indication — subtle opacity or scale change on desktop hover"
  </action>
  <verify>Component accepts project and onClick props; hover effects work visually; TypeScript compiles</verify>
  <done>GalleryItem component displays project image with hover effects and info overlay</done>
</task>

<task type="auto">
  <name>Task 3: Create GalleryGrid with responsive columns</name>
  <files>src/components/portfolio/GalleryGrid.tsx</files>
  <action>
Create src/components/portfolio/GalleryGrid.tsx:

1. Import projects from '@/lib/portfolio-data'
2. Import GalleryItem from './GalleryItem'
3. Implement grid layout:
   - CSS Grid: grid grid-cols-1 md:grid-cols-2
   - Gap: gap-4 (16px) per context decision "8-16px gaps"
   - Container: max-w-7xl mx-auto px-4
4. Map through projects and render GalleryItem
5. Pass onClick handler to each item (will connect to modal in next task)
6. Mobile behavior: Single column (grid-cols-1) - per context "1 column fullscreen images on mobile"

Per context decision: "Desktop columns: 2 columns for balance and image size"
  </action>
  <verify>Grid displays 1 column on mobile, 2 columns on desktop; gap is 16px; all projects render</verify>
  <done>GalleryGrid displays projects in responsive 1/2 column layout with proper spacing</done>
</task>

<task type="auto">
  <name>Task 4: Create FullscreenModal for image viewing</name>
  <files>src/components/portfolio/FullscreenModal.tsx</files>
  <action>
Create src/components/portfolio/FullscreenModal.tsx as Client Component:

1. Add 'use client' directive
2. Import Image from 'next/image'
3. Accept props: isOpen (boolean), onClose (function), project (Project | null)
4. Implement modal:
   - Fixed overlay covering full viewport (fixed inset-0)
   - Background: black/90 for focus
   - Close button: X visible at top-right (per context "X button visible to exit fullscreen")
   - Image centered with max-height/width constraints
   - Project info overlay: title, location, year
   - Click outside to close
   - Escape key to close
5. Transition: Use simple opacity fade for open/close (crossfade per context decision)
6. Prevent body scroll when open

Per context: "Tap to fullscreen — tap image to open fullscreen modal" and "Close button — X button visible to exit fullscreen"
  </action>
  <verify>Modal opens/closes on click; escape key closes; close button visible; backdrop closes modal</verify>
  <done>FullscreenModal displays project image in centered view with close functionality</done>
</task>

<task type="auto">
  <name>Task 5: Create portfolio page integrating all components</name>
  <files>src/app/portfolio/page.tsx</files>
  <action>
Create src/app/portfolio/page.tsx as Server Component:

1. Import GalleryGrid from '@/components/portfolio/GalleryGrid'
2. Import FullscreenModal from '@/components/portfolio/FullscreenModal'
3. Add 'use client' for modal state management
4. Implement state:
   - selectedProject: Project | null = null
   - isModalOpen: boolean = false
5. Render:
   - Page heading: "Portfolio" or "Projetos" (PT-BR per requirements)
   - GalleryGrid component
   - FullscreenModal (controlled by state)
6. Handle project selection: Click on GalleryItem opens modal with that project
7. Add basic SEO metadata (export const metadata)

Note: This is a Server Component that uses client components (GalleryGrid, FullscreenModal) for interactivity.
  </action>
  <verify>Page renders at /portfolio; clicking gallery items opens modal; modal closes properly</verify>
  <done>Portfolio page displays gallery grid with fullscreen modal functionality</done>
</task>

</tasks>

<verification>
1. Visit /portfolio route - gallery grid displays with 2 columns on desktop, 1 on mobile
2. Check Lighthouse - CLS score should be 0 (images have explicit dimensions)
3. Hover over gallery items - subtle opacity/scale effect triggers
4. Click any gallery item - fullscreen modal opens with centered image
5. Close modal via X button, clicking outside, or Escape key - modal closes
6. Verify images are WebP/AVIF (check DevTools Network tab)
7. Verify no layout shift during image loading (watch for jumping content)
</verification>

<success_criteria>
- Gallery displays in responsive grid (2 column desktop, 1 column mobile)
- All images load with explicit dimensions (zero CLS)
- Images optimize to WebP/AVIF formats via next/image
- Hover effects are subtle and premium-feeling
- Fullscreen modal opens/closes smoothly
- 6-8 placeholder projects display correctly
</success_criteria>

<output>
After completion, create `.planning/phases/03-portfolio/03-01-SUMMARY.md` with:
- Components created (GalleryGrid, GalleryItem, FullscreenModal, portfolio-data.ts)
- Placeholder image count and aspect ratio used
- Verification results (CLS, image formats)
- Any deviations from plan
</output>
